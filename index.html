<html>
	<head>
		<link rel="stylesheet" href="style.css">
      <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		  <script src="main.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta charset="utf-8">
	</head>
	<body>   
    <div class="main">
      <img src="img/home2.jpg" style="width: 100%;height: 23%">
   <div class="menu">
        <ul>
          <li>Ana səhifə</li>
          <li>Haqqımızda</li>
          <li>Məhsullarımız</li>
          <li>Portfolio</li>
          <li>Əlaqə</li>
         <!--  <li>
                
                <i class="fa fa-shopping-cart" aria-hidden="true">
                  <sup id="itemCount">0</sup>
                </i>

          </li> -->
            <li  class="hover">
             <div class="dropdown">
                <i class="fa fa-shopping-cart" aria-hidden="true">
                    <sup id="itemCount">0</sup>
                  </i>
                <div class="dropdown-content" style="left:0;">
                  <a href="#">
                    <div>
                 <!--    <img src="img/tel.jpg">
                    <span>Iphone</span>
                    <span>1200$</span> -->
                    </div>
                 
                  </a>
                </div>
              </div>
          </li>
        </ul>
      </div>

      <div class="slider">
      <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
          <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#myCarousel" data-slide-to="1"></li>
          <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner">
          <div class="item active">
            <img src="img/slider.jpg"  style="width:100%;height: 100%">
          </div>

          <div class="item">
            <img src="img/slider.jpg"  style="width:100%;height: 100%">
          </div>
        
          <div class="item">
            <img src="img/slider.jpg"  style="width:100%;height: 100%">
          </div>
        </div>

        <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
          <span class="glyphicon glyphicon-chevron-left"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
          <span class="glyphicon glyphicon-chevron-right"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

      </div>

  <!-- Cart Collection -->
<!--   <div class="collection cal" id="dropable" ondrop="drop(event)" ondragover="allowDrop(event)">
    <div class="icon-shopping-cart" id="itemcount">
       <span id="itemCount"></span>
      <i class="fa fa-shopping-cart" aria-hidden="true"></i>

    </div>
    <div class="list">
      <ul>
        <li>Məhsulun şəkili</li>
        <li>Məhsulun adı</li>
        <li>Sil</li>
      </ul>
    </div>
    <ul class="grid" id="target-grid">
    </ul>
    
  </div> -->
  <div class="clearfix"></div>
  <!-- Item collection -->
  <div class="collection2 draggablediv" >
    <h1 class="basliq">  Məhsullar</h1>
    <ul class="grid2">
      
    </ul>  
  </div>
</div>
<p id="demo"></p>

	</body>
</html>


<script type="text/javascript">

var myLocal = [];
//$(.grid).on(clikc,.add,func)
function ce(){
$('.add').click(function (){
  itemCount ++;

  
  $('#itemCount').html(itemCount)
  var parent = $(this).parent().clone();
  var img = parent.find("img")
  var p1 = parent.find("p")[0]
  var p2 = parent.find("p")[1];

 var div =  $("<div></div>");
 div.append(img);
 div.append($(p1))
 div.append($(p2))
 div.appendTo($(".dropdown-content"));

 if(localStorage.getItem("kartim")){
    myLocal = JSON.parse(localStorage.getItem("kartim"));
  }

  myLocal.push(div[0].outerHTML);

  if(localStorage){
    console.log(JSON.stringify(myLocal));
    localStorage.kartim = JSON.stringify(myLocal)
    console.log(localStorage.kartim);
  }



});

}

if(localStorage.getItem("kartim")){
    var newArray = JSON.parse(localStorage.getItem("kartim"));
    // console.log(newArray);
    for(var i=0;i<newArray.length;i++){
    // div.appendTo(localStorage.getItem("kartim"));
    $(".dropdown-content").append(newArray[i]);
    console.log(newArray);
    }

  }



  $.ajax 
    ({
        url: 'http://192.168.150.12/data',
        dataType: "json",
        success: onSuccess 

   });


function onSuccess(data)  {
  
    //  console.log(data.products)
    for(i=0;i<data.products.length;i++){
        $('.grid2').append( '<li draggable="true" class="draggable mobile" ondragstart="drag(event)" id="item7">'
       +'<img src=" '+data.products[i].img  +' "  class="apimg" >'
      +  '<p> '+data.products[i].description  +'</p>'
          +'<p>'+data.products[i].price  +' azn</p>'
          +'<ipput type="hidden" value="'+data.products[i].id  +'"></i>'
        +'<p class="add"> Sebete elave et</p>'
     +' </li>' )
    }
    ce();
 }

// =================================



// =============================================
$('.clear').click(function() {
  itemCount = 0;
  $('#itemCount').html('').css('display', 'none');
}); 
</script>


